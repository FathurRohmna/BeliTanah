<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>BeliTanah | Simulasi harga</title>

    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">
</head>

<body>
    <div class="relative w-full">
        <div class="w-full bg-gray-900 text-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
                <h5 class="font-bold text-lg">Kenali kita lebih lanjut <a href="./tentang.html"
                        class="underline">disini</a></h5>
            </div>
        </div>
        <div class="relative w-full">
            <div class="absolute top-0 right-0 left-0 bg-white/70">
                <div class="max-w-7xl mx-auto">
                    <div class="relative z-10 lg:pb-8 pb-0 bg-transparent">
                        <div class="relative pt-6 px-4 sm:px-6 lg:px-8">
                            <nav class="relative flex items-center justify-between sm:h-10">
                                <div class="flex items-center flex-grow flex-shrink-0 lg:flex-grow-0">
                                    <div class="flex items-center justify-between w-full md:w-auto">
                                        <a href="./index.html" class="ml-2">
                                            <span class="sr-only">BeliTanah</span>
                                            <img class="h-6 w-auto" src="/assets/images/beli-tanah.png" />
                                        </a>
                                    </div>
                                </div>
                                <div class="hidden md:block md:ml-10 md:pr-4 md:space-x-8">
                                    <a href="./list-tanah.html"
                                        class="font-semibold text-lg text-gray-700 hover:text-gray-500">List tanah</a>
                                    <a href="./list-agen.html"
                                        class="font-semibold text-lg text-gray-700 hover:text-gray-500">List agen</a>
                                    <a href="./simulasi-harga.html"
                                        class="font-semibold text-lg text-gray-700 hover:text-gray-500">Simulasi
                                        harga</a>
                                    <a href="./kontak.html"
                                        class="font-semibold text-lg  text-gray-700 hover:text-gray-500">Kontak</a>
                                    <a href="./authentikasi.html"
                                        class="font-semibold text-lg  text-gray-700 hover:text-gray-500">Jual tanah</a>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="min-h-[80vh] my-24">
            <div class="max-w-7xl mx-auto space-y-6">
                <h1 class="text-2xl font-bold">Bookmark Data</h1>

                <!-- Placeholder for displaying bookmarks -->
                <div id="bookmark-list" class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 lg:gap-6">
                    <!-- JavaScript will dynamically populate the bookmarks here -->
                </div>
            </div>
        </main>

        <footer class="bg-gray-900 pt-16 pb-20 px-8 box-border">
            <div class="max-w-7xl mx-auto text-xs">
                <div
                    class="relative grid grid-cols-2 gap-8 lg:grid-cols-5 sm:grid-cols-4 pb-8 sm:pb-10 md:pb-12 lg:pb-14 text-white">
                    <div class="mb-6">
                        <h1 class="text-3xl font-bold text-white mb-2">BeliTanah</h1>
                        <p class="mb-2 leading-6">Temukan Tanah Impianmu di BeliTanah.</p>

                    </div>
                    <div class="">
                        <h1 class="font-bold mb-2 text-white">Explore</h1>
                        <a class="block leading-6">List tanah</a>
                        <a class="block leading-6">List agen</a>
                        <a class="block leading-6">Simulasi harga</a>
                        <a href="./kontak.html" class="block leading-6">Kontak</a>
                        <a class="block leading-6">Jual tanah</a>
                    </div>
                    <div class="">
                        <h1 class="font-bold mb-2 text-white">Visit</h1>
                        <p class="leading-6">Karangbawang, Kawunganten <br /> Cilacap, Jawa Tengah <br /> Indonesia.</p>
                    </div>
                    <div>
                        <h1 class="mb-2 font-bold text-white">New Business</h1>
                        <p class="leading-6">fr089138@gmail.com</p>
                        <p class="leading-6">+62 838-6788-6915</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Function to load bookmarks from localStorage
        const loadBookmarks = () => {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedProperties')) || [];
            return bookmarks;
        };


        // Function to toggle bookmark status
        const toggleBookmark = (item) => {
            const bookmarks = loadBookmarks();
            const isAlreadyBookmarked = bookmarks.some(bookmarkedItem => bookmarkedItem.id === item.id);

            if (isAlreadyBookmarked) {
                // Remove from bookmarks
                const updatedBookmarks = bookmarks.filter(bookmarkedItem => bookmarkedItem.id !== item.id);
                saveBookmarks(updatedBookmarks);
            } else {
                // Add to bookmarks
                bookmarks.push(item); // Save the entire item object
                saveBookmarks(bookmarks);
            }
            renderCards(); // Re-render cards to update bookmark status
        };

        // Function to check if a property is bookmarked
        const isBookmarked = (id) => {
            const bookmarks = loadBookmarks();
            return bookmarks.some(bookmarkedItem => bookmarkedItem.id === id);
        };

        // Function to render the bookmarks on the page
        const renderBookmarks = () => {
            const bookmarkList = document.getElementById('bookmark-list');
            bookmarkList.innerHTML = '';  // Clear existing bookmarks

            const bookmarks = loadBookmarks();

            if (bookmarks.length === 0) {
                bookmarkList.innerHTML = '<p class="text-gray-500">No bookmarks available.</p>';
                return;
            }

            bookmarks.forEach((tanah, index) => {
                const card = document.createElement('div');
                card.className = "w-full rounded overflow-hidden shadow-lg";

                // Create the image section (use a placeholder image or dynamic image based on your needs)
                const imgDiv = document.createElement('div');
                imgDiv.className = "relative";

                const img = document.createElement('img');
                img.className = "w-full";
                img.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSJW9evu0DJujsURWumbiFnVUd0XuCLmfvwA&s"; // Placeholder image
                img.alt = "Tanah Image";

                const priceDiv = document.createElement('div');
                priceDiv.className = "absolute bottom-4 right-4 bg-white/90 rounded px-4 py-2";
                priceDiv.innerHTML = `<span class="font-bold text-xl">Rp. ${tanah.price.toLocaleString()}${tanah.isNegotable && 'IsNegotable'}</span>`;

                imgDiv.appendChild(img);
                imgDiv.appendChild(priceDiv);
                card.appendChild(imgDiv);

                // Create the content section
                const contentDiv = document.createElement('div');
                contentDiv.className = "px-6 py-4 space-y-1 text-md";

                // Location and map link
                const locationDiv = document.createElement('div');
                locationDiv.className = "mb-3 flex items-start gap-2";
                locationDiv.innerHTML = `
            <div>
                <div class="font-bold text-xl mb-2">${tanah.location.address}</div>
                <span class="text-sm underline"><a href="${tanah.location.coordinateGMapsUrl}" target="_blank">Lihat di google maps</a></span>
            </div>
            <button data-id="${index}" class="bookmark-btn p-2 border border-slate-400 rounded-full -mr-2 ${isBookmarked(index) ? '!border-blue-400 !bg-slate-400 !text-white' : ''}">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark" viewBox="0 0 16 16">
                    <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1z"/>
                </svg>
            </button>
        `;
                contentDiv.appendChild(locationDiv);

                // Size information
                const sizeDiv = document.createElement('div');
                sizeDiv.className = "flex items-center justify-between";
                sizeDiv.innerHTML = `<p>${tanah.type.charAt(0).toUpperCase() + tanah.type.slice(1)}</p><p>${tanah.size.width} x ${tanah.size.height} m</p>`;
                contentDiv.appendChild(sizeDiv);

                // Installment and negotiable information
                const installmentDiv = document.createElement('div');
                installmentDiv.className = "flex items-center justify-between";
                installmentDiv.innerHTML = `<p>${tanah.isInstallment ? 'Bisa angsur' : 'Tidak bisa angsur'}</p><p>${tanah.monthInstallment} x</p>`;
                contentDiv.appendChild(installmentDiv);

                // Publisher information
                const publisherDiv = document.createElement('p');
                publisherDiv.innerHTML = `Publisher: <span>${tanah.publisher.name} (${tanah.publisher.email})</span>`;
                contentDiv.appendChild(publisherDiv);

                // Append content div to card
                card.appendChild(contentDiv);

                // Create button to buy
                const buttonDiv = document.createElement('div');
                buttonDiv.className = "p-4";
                const button = document.createElement('button');
                button.className = "w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded";
                button.innerText = "Beli";
                button.onclick = () => openNegotiableModal(tanah);
                buttonDiv.appendChild(button);
                card.appendChild(buttonDiv);

                bookmarkList.appendChild(card);
            });
        };

        // Render bookmarks on page load
        document.addEventListener('DOMContentLoaded', renderBookmarks);
    </script>
</body>

</html>